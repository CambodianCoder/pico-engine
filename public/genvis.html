<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
<link rel="icon" type="image/png" href="pico-logo-transparent-48x48.png">
<title>TITLE</title>
<link rel="stylesheet" href="css/genvis.css">
<link rel="stylesheet" href="css/jquery.minicolors.css">
<script src="js/jquery-3.1.0.min.js" type="text/javascript"></script>
<script src="js/jquery-ui-1.11.4.min.js" type="text/javascript"></script>
<script src="js/jquery.minicolors.js"></script>
<script src="js/handlebars.min.js" type="text/javascript"></script>
<script src="js/genvis.js" type="text/javascript"></script>
<script id="the-template" type="text/x-handlebars-template">
<a class="logo" href="https://picolabs.io"><img src="logo.png" alt="logo"></a>
<h1 class="title">{{title}}</h1>
<div id="container" style="position:relative">
<p class="description">
{{descr}}
</p>
{{#picos}}
<div class="pico" id="{{id}}" style="{{style}}">
{{dname}}
</div>
<div class="pico-edit" style="{{style}}">
{{dname}}
<ul class="horiz-menu">
<li>About</li>
<li>Rulesets</li>
<li>Channels</li>
<li>Subscriptions</li>
<li>Logging</li>
</ul>
<div class="pico-section"></div>
</div>
{{/picos}}
{{#if chans}}
<svg>
{{#chans}}
  <line class="{{class}}"></line>
{{/chans}}
</svg>
{{/if}}
</div>
</script>
<script id="about-template" type="text/x-handlebars-template">
<h2>Pico</h2>
<p>
<b>ID: </b>
<span id="about-pico-name">{{id}}{{#if root}}
<a href="/sky/event/{{eci}}/19/pico/root_created?id={{id}}&eci={{eci}}">send event pico/root_created</a>{{/if}}</span>
</p>
<p>
<b>ECI: </b>
<span id="about-eci">{{eci}}</span>
</p>
<p>
<b>Note: </b>
the ECI is the path into your pico and should be treated as a
<em>shared secret</em> between the pico and the application using
the pico's Event-Query API.
Do not disclose it or check it into a repository like Github.
</p>
<form action="/sky/event/{{eci}}/31/visual/update" method="GET">
<p>
<b>Display name: </b>
<input type="text" name="dname" value="{{dname}}">
</p>
<p>
<b>Color: </b>
<input type="text" name="color" id="{{id}}-minicolors" value="{{color}}">
</p>
<button type="submit">send event visual/update</button>
</form>
{{#if parent}}
<h2>Parent</h2>
<p>
<b>ID: </b>{{parent.id}}
<b>ECI: </b>{{parent.eci}}
</p>
{{/if}}
<h2>Children</h2>
{{#each children}}
<p>
<b>ID: </b>{{this.id}}
<b>ECI: </b>{{this.eci}}
{{#if canDel}}
<a href="/sky/event/{{../eci}}/58/pico/delete_child_request?id={{this.id}}&eci={{this.eci}}">del</a>
{{/if}}
</p>
{{/each}}
<p>
<form action="/sky/event/{{eci}}/52/pico/new_child_request" method="GET">
<input type="submit" value="add child pico">
</form>
</p>
</script>
<script id="rulesets-template" type="text/x-handlebars-template">
<div style="float:left;max-width:40%">
Pico Rulesets
<ul class="rulesets">
{{#each installed}}
<li class="krlrid">{{@key}}</li>
<ul>
{{#each vars}}
<li>ent:{{@key}}={{this}}</li>
{{/each}}
</ul>
{{/each}}
</ul>
{{#if avail}}
Available Rulesets
<p></p>
<form action="/api/pico/{{pico_id}}/add-ruleset" method="GET">
<select name="rid">
{{#each avail}}
<option>{{this}}</option>
{{/each}}
</select>
<input type="submit" value="add ruleset">
</form>
{{/if}}
</div>
</script>
<script id="channels-template" type="text/x-handlebars-template">
Channels
<table border="1" cellspacing="0">
<tr><th>name</th><th>id</th><th>type</th></tr>
{{#each channel}}
<tr><td>{{name}}</td><td>{{id}}</td><td>{{type}}</td></tr>
{{/each}}
</table>
<p></p>
<form method="GET" onsubmit="alert('not implemented');return false">
<input type="text" name="name" placeholder="name...">
<input type="text" name="type" placeholder="type...">
<input type="submit" value="add channel">
</form>
</script>
<script id="subscriptions-template" type="text/x-handlebars-template">
Subscriptions
</script>
<script id="logging-template" type="text/x-handlebars-template">
Logging
</script>
</head>
<body>
<p>Loading...</p>
</body>
</html>
